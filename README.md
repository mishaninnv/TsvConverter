# StarkovGroupTest
<div>
  TsvConverter - приложение принмиает .tsv файлы, обрабатывает (приведение к модели), записывает в базу данных.
</div>

<h3><B>Важно!</B></h3> 
Для корректрой работы необходима база данных Postgresql 14.

<h2>Запуск</h2>
<div>
1. При отсутствии экземпляра базы данных(подъем контейнера через Docker):
    
запуск контейнера базы данных

    docker run --name starkov -p 5432:5432 -e POSTGRES_PASSWORD=superpassword!123 -d postgres:14
    
настройки подключения к бд хранятся в конфигурационном файле App.config. После сборки в StarkovGroupTest.dll.config.
  
Параметр в конфигурационном файле IsInitDb - отвечает за инициализацию базы данных с таблицами. Может принимать значения 1 (нужно инициализировать) и 0 (не нужно); По умолчанию стоит 1, после первого запуска программы можно установить 0.
</div>

<div>
2. Вызов программы осуществляется из консоли.
  
Программа работает в двух режимах:
  - импорт;
  - вывод;
</div>

<div>
3. Режим импорта:
  
команда вызова:

    StarkovGroupTest.exe import "fullFilePath\\fileName.tsv" importType
    
StarkovGroupTest.exe - название вызываемой программы;
  
import - режим работы; (возможен режим display)
  
"fullFilePath\\fileName.tsv" - полный путь к .tsv файлу;
  
importType - тип импорта, из возможных (jobtitles, departments, employees);
  
Программа записывает данные из файла в базу данных. После выводит список подразделений с сотрудниками содержащимися в БД.
</div>

<div>
4. Режим вывода:

    StarkovGroupTest.exe display depId
  
StarkovGroupTest.exe - название вызываемой программы;
  
display - режим работы; (возможен режим import)

depId - целочисленный идентификатор подразделения;
  
Программа выводит иерархию подразделений (до требуемого подразделения), и всю информацию по запрашиваемому подразделению (руководитель, сотрудники).
</div>

<div>
5. Очередность импорта данных. (для корректной работы программы)
  
  - импорт подразделений;
  
  - импорт должностей;
  
  - импорт сотрудников;
  
  - импорт подразделений (для установки связи с руководителями);
  
</div>

<div>
6. Другое.
  
  - при невозможности добавить запись в БД программа выведет данные записи в консоль;
  
  - таблица департаментов заполняется только из файла с департаментами, таблица должностей заполняется из файла с должностями, таблица сотрудников заполняется из файла сотрудников (например: если должность сотрудника при заполнении из файла сотрудников, отсутствует в таблице должностей, такой сотрудник добавлен не будет и должность тоже);
  
  - при повторном импорте одинаковых записей и изменении полей будут произведены замены в БД:
  
    - у подразделений может смениться только руководитель;
  
    - у сотрудников может смениться пароль и подразделение;
  
</div>
