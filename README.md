# StarkovGroupTest
<div>
  TsvConverter - приложение записывающее данные из .tsv файлов в базу данных.
</div>

<h2>Установка.</h2>

<div>

1. Клонирование репозитория.
  
2. Билд проекта.
  
3. При отсутствии экземпляра базы данных (подъем контейнера через Docker):
    
       docker run --name starkov -p 5432:5432 -e POSTGRES_PASSWORD=superpassword!123 -d postgres:14
    
Для корректной работы необходима база данных Postgresql 14.
  
</div>

<h2>Настройка.</h2>

<div>
  
1. Перед запуском программы необходимо инициализировать базу данных и таблицы. Можно сделать двумя способами:

  - Параметр в конфигурационном файле IsInitDb - отвечает за инициализацию базы данных с таблицами (при запуске приложения). Может принимать значения 1 (инициализирует) и 0 (не инициализирует); 
По умолчанию стоит 0 (инициализацию бд с таблицами необходимо будет сделать вручную).
  
  - В файле InitDataBaseSQL.txt (в корне приложения) содержатся инструкции по инициализации БД и таблиц через SQL.
  
2. Настройки подключения к бд хранятся в конфигурационном файле App.config. После сборки в StarkovGroupTest.dll.config.

</div>

<h2>Запуск.</h2>

<div>  
  
1. Работа с программой осуществляется через консоль. В двух режимах: import, display.
  
2. Программа принимает следующие флаги:
  
     -a - action, выполняемое действие (import | display); (обязательный)
  
     -p - file path, полный путь к импортируемому файлу; (режим import)
  
     -t - import type, тип импорта (jobtitles | departments | employees); (режим import)
  
     -d - department id, id департамента для вывода информации; (режим display)
  
 3. Шаблон команды вызова программы (из папки программы):
  
      импорт:
  
        StarkovGroupTest.exe -a import -p "fullPath\fileName.tsv" -t (jobtitles | departments | employees)
  
      вывод:
  
        StarkovGroupTest.exe -a display -d number
  
</div>

<h2>Работа.</h2>

<div>
  
1. В режиме import - программа записывает данные из файла в базу данных. После выводит список подразделений с сотрудниками содержащимися в БД (в консоль).  
  
2. В режиме display - программа выводит в консоль иерархию подразделений (до требуемого подразделения), и всю информацию по запрашиваемому подразделению (руководитель, сотрудники).
  
3. Очередность импорта данных. (в начале работы, для корректной работы программы)
  
  - импорт подразделений; (записывает подразделения без руководителей)
  
  - импорт должностей; (записывает должности)
  
  - импорт сотрудников; (записывает сотрудников связывая с подразделениями и должностями)
  
  - повторный импорт подразделений (для установки связи с руководителями);

</div>

<h2>Другое.</h2>

<div>

  1. при невозможности добавить запись в БД программа выведет данные записи в консоль;
  
  2. таблица департаментов заполняется только из файла с департаментами, таблица должностей заполняется из файла с должностями, таблица сотрудников заполняется из файла сотрудников (например: если должность сотрудника при заполнении из файла сотрудников, отсутствует в таблице должностей, такой сотрудник добавлен не будет и должность тоже);
  
  3. при повторном импорте одинаковых записей и изменении полей будут произведены замены в БД:
  
   - у подразделений может смениться только руководитель;
  
   - у сотрудников может смениться пароль и подразделение;
  
</div>
