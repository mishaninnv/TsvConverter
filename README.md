# StarkovGroupTest
<div>
  TsvConverter - приложение принмиает .tsv файлы, обрабатывает (приведение к модели), записывает в базу данных.
</div>

<h2>Работа с программой.</h2>

<div>
  
1. Работа с программой осуществляется через консоль. В двух режимах: import, display.
  
2. Программа принимает следующие флаги:
  
     -a - action, выполняемое действие (import | display); (обязательный)
  
     -p - file path, полный путь к импортируемому файлу; (режим import)
  
     -t - import type, тип импорта (jobtitles | departments | employees); (режим import)
  
     -d - department id, id департамента для вывода информации; (режим display)
  
3. В режиме import - программа записывает данные из файла в базу данных. После выводит список подразделений с сотрудниками содержащимися в БД.  
  
4. В режиме display - программа выводит иерархию подразделений (до требуемого подразделения), и всю информацию по запрашиваемому подразделению (руководитель, сотрудники).
  
5. Очередность импорта данных. (для корректной работы программы)
  
  - импорт подразделений;
  
  - импорт должностей;
  
  - импорт сотрудников;
  
  - импорт подразделений (для установки связи с руководителями);
  
6. Другое.
  
  - при невозможности добавить запись в БД программа выведет данные записи в консоль;
  
  - таблица департаментов заполняется только из файла с департаментами, таблица должностей заполняется из файла с должностями, таблица сотрудников заполняется из файла сотрудников (например: если должность сотрудника при заполнении из файла сотрудников, отсутствует в таблице должностей, такой сотрудник добавлен не будет и должность тоже);
  
  - при повторном импорте одинаковых записей и изменении полей будут произведены замены в БД:
  
    - у подразделений может смениться только руководитель;
  
    - у сотрудников может смениться пароль и подразделение;
  
</div>




<h2>Настройка базы данных.</h2>

Для корректрой работы необходима база данных Postgresql 14.

<div>
  
1. При отсутствии экземпляра базы данных(подъем контейнера через Docker):
    
запуск контейнера базы данных

    docker run --name starkov -p 5432:5432 -e POSTGRES_PASSWORD=superpassword!123 -d postgres:14
    
2. Настройки подключения к бд хранятся в конфигурационном файле App.config. После сборки в StarkovGroupTest.dll.config.

3. Параметр в конфигурационном файле IsInitDb - отвечает за инициализацию базы данных с таблицами (при запуске приложения). Может принимать значения 1 (инициализирует) и 0 (не инициализирует); 
  По умолчанию стоит 0 (инициализацию бд с таблицами необходимо будет сделать вручную).
  
4. В файле InitDataBaseSQL.txt (в корне приложения) содержатся инструкции по инициализации БД и таблиц через SQL.
  
</div>


